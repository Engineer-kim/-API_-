<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>Lugx Gaming - Product Detail</title>

    <!-- Bootstrap core CSS -->
    <link href="/js/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="/js/assets/css/fontawesome.css">
    <link rel="stylesheet" href="/js/assets/css/templatemo-lugx-gaming.css">
    <link rel="stylesheet" href="/js/assets/css/owl.css">
    <link rel="stylesheet" href="/js/assets/css/animate.css">
    <link rel="stylesheet"href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>
    <script src="/js/vendor/jquery/jquery.min.js"></script>
    <script src="/js/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/assets/js/isotope.min.js"></script>
    <script src="/js/assets/js/owl-carousel.js"></script>
    <script src="/js/assets/js/counter.js"></script>
    <script src="/js/assets/js/custom.js"></script>

    <style>

        swiper-container {
            width: 100%;
            height: 100%;
        }

        swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

    </style>

    <title>helolo</title>
</head>

<body>
<!--<div id="movieDetails">
    <img id="moviePoster" src="" alt="영화 포스터">
    <h2 id="movieNm"></h2>
    <h3 id="movieNmEn"></h3>
    <p id="typeNm"></p>
    <p id="genres"></p>
    <p id="actors"></p>
</div>-->

<!-- ***** Preloader Start ***** -->
<div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- ***** Preloader End ***** -->

<!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li class="listyle"><a href="contact.html">회원가입</a></li>
                        <li><a href="#">로그인</a></li>
                    </ul>
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- ***** Header Area End ***** -->
<div class="page-heading header-text">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h3>
                    <div class="movieDetails">
                        <div class="movieNm"></div>
                    </div>
                </h3>
            </div>
        </div>
    </div>
</div>
<!-- 영화상세 정보 불러오는 부분-->
<div class="single-product section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="divstyle">
                    <img class="moviePoster" src="" alt="영화포스터" width="450px" height="500px">
                </div>
            </div>
            <div class="col-lg-6 align-self-center">
                <h4>
                    <div class="movieDetails">
                        <div class="movieNm"></div>
                    </div>
                </h4>
                <p>영화설명</p>
                <ul>
                    <li class="typeNm"><span>길이:</span></li>
                    <li class="genres"><span>장르:</span></li>
                    <li class="actors"><span>출연 배우:</span></li>
                </ul>
            </div>
            <div class="col-lg-12">
                <div class="sep"></div>
            </div>
        </div>
    </div>
</div>
<!-- 리뷰-->
<div class="more-info">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="tabs-content">
                    <div class="row">
                        <div class="nav-wrapper ">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab" aria-controls="description" aria-selected="true">Description</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab" aria-controls="reviews" aria-selected="false">Reviews (3)</button>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                                <!-- 리뷰 작성 폼 -->
                                <form>
                                    <div class="mb-3">
                                        <label for="reviewText" class="form-label">리뷰 작성</label>
                                        <textarea class="form-control" id="reviewText" rows="3"></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">리뷰 작성</button>
                                </form>
                            </div>
                            <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab" style="max-height: 400px; overflow-y: scroll;">
                                <!-- 여기에 리뷰들을 나열합니다. 스크롤바가 활성화됩니다. -->
                                <p>리뷰 1: Coloring book air plant shabby chic, crucifix normcore raclette cred swag artisan activated charcoal. PBR&B fanny pack pok pok gentrify truffaut kitsch helvetica jean shorts edison bulb poutine next level humblebrag la croix adaptogen.</p>
                                <p>리뷰 2: Hashtag poke literally locavore, beard marfa kogi bruh artisan succulents seitan tonx waistcoat chambray taxidermy. Same cred meggings 3 wolf moon lomo irony cray hell of bitters asymmetrical gluten-free art party raw denim chillwave tousled try-hard succulents street art.</p>
                                <!-- 추가 리뷰들 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 일간박스오피스 스와이퍼 -->
<div class="section trending">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="section-heading">
                    <h6>일간순위</h6>
                    <h2>오늘의 박스오피스 TOP10</h2>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="main-button">
                    <a href="shop.html">View All</a>
                </div>
            </div>

            <swiper-container class="mySwiper" pagination="true" pagination-clickable="true" space-between="30"
                              slides-per-view="3">
                <swiper-slide>
                    <div id="rank1">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank2">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank3">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank4">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank5">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank6">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank7">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank8">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank9">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
                <swiper-slide>
                    <div id="rank10">
                        <div class="movieContainer">
                            <div class="posterContainer"></div> <!-- 영화 포스터 컨테이너 -->
                            <div class="movieDetails">
                                <div class="infoContainer"></div> <!-- 영화 제목 및 개봉일 컨테이너 -->
                            </div>
                        </div>
                    </div>
                </swiper-slide>
            </swiper-container>
        </div>
    </div>
</div>
<!-- footer 부분 -->
<footer>
    <div class="container">
        <div class="col-lg-12">
            <p>Copyright © 2048 LUGX Gaming Company. All rights reserved. &nbsp;&nbsp; <a rel="nofollow" href="https://templatemo.com" target="_blank">Design: TemplateMo</a></p>
        </div>
    </div>
</footer>

</body>
<script src="/js/config.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        const urlParams = new URLSearchParams(window.location.search);
        const movieCd = urlParams.get('movieCd');

        if (movieCd) {
            $.ajax({
                // 영화 상세 정보 불러오는 API
                url: urlConfig.baseUrl + "/movieInfo/v1/moviesDetail?movieCd=" + movieCd,
                type: "GET",
                headers: {
                    "X-Requested-With": "XMLHttpRequest" // AJAX 요청임을 명시
                },
                success: function(response) {
                    showMovieDetail(response)
                },
                error: function(xhr, status, error) {
                    console.error("Error occurred: " + error);
                }
            });
        } else {
            console.error("movieCd 값이 없습니다.");
        }
    });
    /** 영화 상세정보 불러오는 함수 */
    function showMovieDetail(response){

        $('.moviePoster').attr('src', response.moviePosterUrl);


        $('.movieNm').text(response.movieInfoResult.movieInfo.movieNm);
        $('.movieNmEn').text(response.movieInfoResult.movieInfo.movieNmEn);
        $('.typeNm').text(response.movieInfoResult.movieInfo.typeNm);


        const genres = response.movieInfoResult.movieInfo.genres.map(genre => genre.genreNm).join(', ');
        $('.genres').text(genres);


        if(response.movieInfoResult.movieInfo.actors.length > 0){
            const actors = response.movieInfoResult.movieInfo.actors.map(actor => actor.peopleNm).join(', ');
            $('.actors').text(actors);
        } else {
            $('.actors').text('출연 배우 정보 없음');
        }
    }

    /**일별 정보 가져오는 함수*/
    $(document).ready(function(){
        $.ajax({
            url: urlConfig.baseUrl +"/movieInfo/v1/moviesDailyRank?targetDt=" + "20230101",
            type: "GET",
            headers: {
                "X-Requested-With": "XMLHttpRequest"
            },
            success: function(response) {
                displayMoviesRank(response);
            },
            error: function(xhr, status, error) {
                console.error("Error occurred: " + error);
            }
        });
    });
    /** 일간 박스오피스 정보 1~10위까지 불러오는 함수*/
    async function displayMoviesRank(movies) {
        for (const movie of movies) {
            const posterContainer = $('#rank' + movie.rank + ' .posterContainer');
            const infoContainer = $('#rank' + movie.rank + ' .infoContainer');

            const imageUrl = await getImageFunction(movie.movieCd);
            const moviePosterEl = $('<img src="' + imageUrl + '" alt="Movie Poster">');
            posterContainer.append(moviePosterEl); // 포스터 컨테이너에 삽입

            infoContainer.append('<p>제목: ' + movie.movieNm + '</p>');
            infoContainer.append('<p>개봉일: ' + movie.openDt + '</p><br>');

            $('#rank' + movie.rank).on('click', function() {
                pageMove(movie.movieCd);
            });
        }
    }

    /**영화 포스터*/
    async function getImageFunction(movieCd) {
        const response = await fetch(urlConfig.baseUrl +"/movieInfo/v1/getMoviePosterImage?movieCd=" +  movieCd);
        const imageData = await response.text();
        return imageData;
    }
    /** 상세페이지 이동 함수*/
    function pageMove(movieCd){
        window.location.href = urlConfig.baseUrl+"/movieInfoMain/detail?movieCd=" + movieCd;
    }
</script>
</html>